/**
 * jquery-ui-tour v0.5.0
 * built on 06.01.2013
 * Copyright 2013 Manuel Leuenberger
 * licenced under MIT, see LICENSE.txt
 */
(function(t){function o(){}function i(){this.observers=[]}function e(t){i.apply(this),this.steps=t,this.currentStepIndex=-1}function s(t,o){e.apply(this,[t]),this.interval=o,this.intervalId=null}function n(){}function r(t){n.apply(this),this.manipulations=t}function p(t){n.apply(this),this.$element=t}function a(t){p.apply(this,[t])}function u(t){p.apply(this,[t]),this.$cover=null}function h(t){p.apply(this,[t])}function l(o,i){p.apply(this,[o]),this.$mark=t("<span>"),null!=i&&this.$mark.text(i),this.$mark.addClass(l.CLASSES)}function d(o,i){p.apply(this,[o]),this.$hint=t("<div>"),this.$hint.append(i),this.$hint.addClass(d.CLASSES)}function c(){this.manipulations=[]}o.prototype.updateObservable=function(){},i.prototype.updateObservers=function(t){for(var o=0;this.observers.length>o;o++)this.observers[o].updateObservable(this,t)},i.prototype.addObserver=function(t){for(var o=0;this.observers.length>o;o++){var i=this.observers[o];if(i==t)return}this.observers.push(t)},i.prototype.removeObserver=function(t){for(var o=0;this.observers.length>o;o++){var i=this.observers[o];if(i==t)return this.observers.splice(o,1),undefined}},e.prototype=new i,e.prototype.constructor=e,e.prototype.revertCurrentStep=function(){this.currentStepIndex>=0&&this.currentStepIndex<this.steps.length&&this.steps[this.currentStepIndex].revert()},e.prototype.forward=function(){this.currentStepIndex>=0&&this.steps[this.currentStepIndex].revert(),this.steps[++this.currentStepIndex].deploy(),this.updateObservers("forward")},e.prototype.backward=function(){this.currentStepIndex<this.steps.length&&this.steps[this.currentStepIndex].revert(),this.steps[--this.currentStepIndex].deploy(),this.updateObservers("backward")},e.prototype.canForward=function(){return this.currentStepIndex<this.steps.length-1},e.prototype.canBackward=function(){return this.currentStepIndex>0},s.prototype=new e,s.prototype.constructor=s,s.prototype.play=function(){this.forward(),this.intervalId=setInterval(t.proxy(function(){this.canForward()?this.forward():this.stop()},this),this.interval),this.updateObservers("play")},s.prototype.pause=function(){clearInterval(this.intervalId),this.intervalId=null,this.updateObservers("pause")},s.prototype.stop=function(){this.isPlaying()&&(clearInterval(this.intervalId),this.intervalId=null),this.revertCurrentStep(),this.currentStepIndex=-1,this.updateObservers("stop")},s.prototype.isPlaying=function(){return null!=this.intervalId},n.prototype.deploy=function(){},n.prototype.revert=function(){},r.prototype=new n,r.prototype.constructor=r,r.prototype.deploy=function(){for(var t=0;this.manipulations.length>t;t++)this.manipulations[t].deploy()},r.prototype.revert=function(){for(var t=0;this.manipulations.length>t;t++)this.manipulations[t].revert()},p.prototype=new n,p.prototype.constructor=p,a.prototype=new p,a.prototype.constructor=a,a.prototype.deploy=function(){var o={width:t(window).width(),height:t(window).height()},i={width:this.$element.width(),height:this.$element.height()},e=this.$element.offset();t("html,body").animate({scrollLeft:e.left+(i.width-o.width)/2,scrollTop:e.top+(i.height-o.height)/2},{duration:500})},u.prototype=new p,u.prototype.constructor=a,u.COVER_CLASSES="tour-manipulation-expose-cover",u.CLASSES="tour-manipulation-expose",u.prototype.deploy=function(){this.$element.addClass(u.CLASSES),this.$cover=t("<div>").appendTo(t("body")).addClass(u.COVER_CLASSES)},u.prototype.revert=function(){this.$element.removeClass(u.CLASSES),this.$cover.remove()},h.prototype=new p,h.prototype.constructor=h,h.CLASSES="tour-manipulation-highlight",h.prototype.deploy=function(){this.$element.addClass(h.CLASSES)},h.prototype.revert=function(){this.$element.removeClass(h.CLASSES)},l.prototype=new p,l.prototype.constructor=l,l.CLASSES="tour-manipulation-mark",l.prototype.deploy=function(){this.$mark.appendTo(t("body")),this.$mark.offset({top:this.$element.offset().top+parseFloat(this.$mark.css("margin-top")),left:this.$element.offset().left+parseFloat(this.$mark.css("margin-left"))})},l.prototype.revert=function(){this.$mark.remove()},d.prototype=new p,d.prototype.constructor=d,d.CLASSES="tour-manipulation-hint",d.prototype.deploy=function(){this.$hint.appendTo(t("body")),this.$hint.offset({top:this.$element.offset().top+parseFloat(this.$hint.css("margin-top"))+this.$element.outerHeight(),left:this.$element.offset().left})},d.prototype.revert=function(){this.$hint.remove()},c.prototype.scrollTo=function(t){return this.manipulations.push(new a(t)),this},c.prototype.expose=function(t){return this.manipulations.push(new u(t)),this},c.prototype.highlight=function(t){return this.manipulations.push(new h(t)),this},c.prototype.mark=function(t,o){return this.manipulations.push(new l(t,o)),this},c.prototype.hint=function(t,o){return this.manipulations.push(new d(t,o)),this},t.tour={},t.tour.Tour=e,t.tour.AutomaticTour=s,t.tour.Step=r,t.tour.manipulation={},t.tour.manipulation.Manipulation=n,t.tour.manipulation.JQueryManipulation=p,t.tour.manipulation.ScrollToManipulation=a,t.tour.manipulation.ExposeManipulation=u,t.tour.manipulation.HighlightManipulation=h,t.tour.manipulation.MarkManipulation=l,t.tour.manipulation.HintManipulation=d,t.tour.manipulation.ManipulationBuilder=c})(jQuery),function(t){var o="ui-widget ui-tour";t.widget("ui.tour",t.Widget,{options:{tour:null},_create:function(){t.Widget.prototype._create.apply(this),this.options.tour.addObserver(this),this.$backward=t('<button type="button">').appendTo(this.element),this.$forward=t('<button type="button">').appendTo(this.element),this.$backward.button({icons:{primary:"ui-icon-seek-prev"},text:!1}),this.$backward.bind("click."+this.widgetName,t.proxy(function(){this.options.tour.backward()},this)),this.$backward.button("option","disabled",!this.options.tour.canBackward()),this.$forward.button({icons:{primary:"ui-icon-seek-next"},text:!1}),this.$forward.bind("click."+this.widgetName,t.proxy(function(){this.options.tour.forward()},this)),this.$forward.button("option","disabled",!this.options.tour.canForward()),this.element.addClass(o)},destroy:function(){this.options.tour.removeObserver(this),this.$backward.remove(),this.$forward.remove(),this.element.removeClass(o),t.Widget.prototype.destroy.apply(this,arguments)},_setOption:function(o,i){"tour"==o&&this.options.tour.removeObserver(this),t.Widget.prototype._setOption.apply(this,[o,i]),"tour"==o&&(this.options.tour.addObserver(this),this.$backward.button("option","disabled",!this.options.tour.canBackward()),this.$forward.button("option","disabled",!this.options.tour.canForward()))},updateObservable:function(){this.$backward.button("option","disabled",!this.options.tour.canBackward()),this.$forward.button("option","disabled",!this.options.tour.canForward()),this.options.tour.canBackward()||this.$backward.removeClass("ui-state-hover"),this.options.tour.canForward()||this.$forward.removeClass("ui-state-hover")}});var i="ui-automatictour";t.widget("ui.automatictour",t.ui.tour,{_create:function(){t.ui.tour.prototype._create.apply(this),this.$play=t('<button type="button">').insertBefore(this.$backward),this.$pause=t('<button type="button">').insertBefore(this.$backward),this.$stop=t('<button type="button">').insertBefore(this.$backward),this.$play.button({icons:{primary:"ui-icon-play"},text:!1}),this.$play.bind("click."+this.widgetName,t.proxy(function(){this.options.tour.play()},this)),this.$play.button("option","disabled",this.options.tour.isPlaying()),this.$pause.button({icons:{primary:"ui-icon-pause"},text:!1}),this.$pause.bind("click."+this.widgetName,t.proxy(function(){this.options.tour.pause()},this)),this.$pause.button("option","disabled",!this.options.tour.isPlaying()),this.$stop.button({icons:{primary:"ui-icon-stop"},text:!1}),this.$stop.bind("click."+this.widgetName,t.proxy(function(){this.options.tour.stop()},this)),this.element.addClass(i)},destroy:function(){this.options.tour.stop(),this.$play.remove(),this.$pause.remove(),this.$stop.remove(),this.element.removeClass(i),t.ui.tour.prototype.destroy.apply(this,arguments)},_setOption:function(o,i){t.ui.tour.prototype._setOption.apply(this,[o,i]),"tour"==o&&(this.$play.button("option","disabled",this.options.tour.isPlaying()),this.$pause.button("option","disabled",!this.options.tour.isPlaying()))},updateObservable:function(o,i){t.ui.tour.prototype.updateObservable.apply(this,[o,i]),this.$play.button("option","disabled",this.options.tour.isPlaying()),this.$pause.button("option","disabled",!this.options.tour.isPlaying()),this.options.tour.isPlaying()?this.$play.removeClass("ui-state-hover"):this.$pause.removeClass("ui-state-hover")}})}(jQuery);